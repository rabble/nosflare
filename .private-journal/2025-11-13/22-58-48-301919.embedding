{
  "embedding": [
    -0.04511371627449989,
    -0.03866751864552498,
    -0.02841549552977085,
    0.01016244851052761,
    0.12721556425094604,
    0.006287711206823587,
    -0.009779442101716995,
    -0.05380740389227867,
    0.04835091531276703,
    0.05292010307312012,
    0.028377331793308258,
    -0.003498444799333811,
    -0.023030543699860573,
    0.06977735459804535,
    -0.096275694668293,
    0.019079580903053284,
    0.02582583762705326,
    -0.08601638674736023,
    -0.04737430810928345,
    -0.08629431575536728,
    -0.027067897841334343,
    0.02872299589216709,
    0.024768071249127388,
    -0.018231043592095375,
    0.03799187019467354,
    0.005861017853021622,
    -0.05582032352685928,
    -0.054216668009757996,
    0.03868354484438896,
    0.005476799327880144,
    -0.023637449368834496,
    0.08601401746273041,
    -0.07183379679918289,
    0.04146037623286247,
    0.009890834800899029,
    -0.01739659160375595,
    0.0148770185187459,
    -0.037978094071149826,
    -0.013971036300063133,
    -0.08404700458049774,
    0.046277519315481186,
    0.021984262391924858,
    0.04775109142065048,
    0.004777131136506796,
    -0.08929695188999176,
    0.018209397792816162,
    0.04755053669214249,
    -0.04626311734318733,
    0.0182020403444767,
    -0.008202336728572845,
    -0.1068296879529953,
    0.035769227892160416,
    -0.009069736115634441,
    -0.002698281081393361,
    0.07976038753986359,
    -0.009214951656758785,
    -0.07004237920045853,
    -0.015905313193798065,
    0.011819996871054173,
    -0.05136770009994507,
    0.0505937896668911,
    -0.06800394505262375,
    0.0409560427069664,
    -0.02986842952668667,
    -0.0034179885406047106,
    -0.06563422083854675,
    0.02912667579948902,
    -0.005131474230438471,
    0.11733885109424591,
    -0.02654307521879673,
    -0.0063284821808338165,
    0.11169763654470444,
    -0.09098184108734131,
    0.06885547190904617,
    0.023057857528328896,
    0.032648783177137375,
    -0.008051738142967224,
    0.0409371443092823,
    0.009816352277994156,
    -0.1354718655347824,
    0.0749928429722786,
    -0.05449959635734558,
    0.002537476597353816,
    -0.026062069460749626,
    0.02408100850880146,
    -0.01581893116235733,
    0.005540655460208654,
    -0.02868778444826603,
    0.04634517431259155,
    -0.0038477599155157804,
    0.009429259225726128,
    0.04772984981536865,
    -0.0042739687487483025,
    -0.013798882253468037,
    0.018902400508522987,
    -0.027398869395256042,
    -0.015578469261527061,
    0.11913561820983887,
    0.02143275737762451,
    0.049649108201265335,
    -0.03482937812805176,
    0.03791172429919243,
    -0.006777069065719843,
    0.02574830688536167,
    -0.006079129409044981,
    -0.010221068747341633,
    -0.02744385600090027,
    0.06738422065973282,
    -0.009031140245497227,
    0.06694884598255157,
    -0.012130343355238438,
    0.07559867948293686,
    0.014418213628232479,
    -0.050426185131073,
    -0.0024684257805347443,
    0.010425415821373463,
    -0.0058926427736878395,
    -0.010301968082785606,
    -0.06505804508924484,
    0.08856603503227234,
    0.08470667898654938,
    0.01375848613679409,
    -0.018481720238924026,
    0.004497819114476442,
    0.028529949486255646,
    0.07376649975776672,
    0.024879129603505135,
    7.057634286874428e-33,
    0.10560717433691025,
    0.05013606324791908,
    -0.04629205912351608,
    -0.02671799249947071,
    -0.04611396789550781,
    0.032652679830789566,
    0.01349490974098444,
    0.06466042250394821,
    -0.01337489951401949,
    -0.013431044295430183,
    -0.09135818481445312,
    -0.027623996138572693,
    -0.048498474061489105,
    -0.08156038820743561,
    -0.03262196108698845,
    -0.019605860114097595,
    0.03853505104780197,
    -0.0027556365821510553,
    0.007338875439018011,
    0.008238297887146473,
    0.06060359627008438,
    -0.02269592322409153,
    -0.036230284720659256,
    -0.0014111616183072329,
    0.02810385264456272,
    -0.02768472023308277,
    0.015158907510340214,
    -0.09571416676044464,
    0.0019075218588113785,
    0.004697971977293491,
    -0.06851083040237427,
    -0.005537188146263361,
    -0.003829025896266103,
    0.03704061359167099,
    0.008828847669064999,
    0.06350564956665039,
    -0.032107483595609665,
    -0.05044157803058624,
    -0.011927742511034012,
    -0.06152946874499321,
    -0.03078281320631504,
    0.06101730838418007,
    -0.06486142426729202,
    -0.0708085224032402,
    -0.04296273738145828,
    -0.06287339329719543,
    -0.035073719918727875,
    0.0376795269548893,
    0.028857361525297165,
    0.04999503865838051,
    0.00947751384228468,
    -0.011526553891599178,
    0.008634145371615887,
    -0.10309237986803055,
    0.009052036330103874,
    0.023880738765001297,
    0.03717901557683945,
    0.03410467877984047,
    0.050778333097696304,
    -0.010289715602993965,
    0.08523212373256683,
    -0.003850419307127595,
    -0.04068112000823021,
    -0.001936276676133275,
    0.07154137641191483,
    0.0026286079082638025,
    0.0554967001080513,
    0.04035942628979683,
    0.09265889972448349,
    0.07666582614183426,
    0.043481092900037766,
    0.006954445969313383,
    0.024435007944703102,
    -0.0017843248788267374,
    0.06482354551553726,
    -0.08940967172384262,
    -0.024144863709807396,
    0.02040555700659752,
    0.007254980970174074,
    -0.011099535040557384,
    0.04644211381673813,
    -0.11131680756807327,
    -0.01974027045071125,
    -0.002103651175275445,
    -0.046698153018951416,
    -0.028173528611660004,
    0.020071322098374367,
    0.002351711969822645,
    -0.06186755746603012,
    0.012715817429125309,
    0.04378941282629967,
    0.05226747319102287,
    0.016077490523457527,
    0.000765017350204289,
    0.027509119361639023,
    -5.975218884828111e-33,
    -0.007923077791929245,
    -0.016545886173844337,
    -0.006135430186986923,
    -0.015577176585793495,
    0.02766766957938671,
    -0.09364131093025208,
    -0.03345220908522606,
    0.017073439434170723,
    0.07405366003513336,
    -0.04529983922839165,
    0.026768341660499573,
    -0.11593229323625565,
    -0.034585531800985336,
    -0.08549751341342926,
    -0.02585240639746189,
    0.04014061391353607,
    0.0393047034740448,
    -0.11864669620990753,
    -0.06124467775225639,
    0.012887302786111832,
    -0.08902231603860855,
    0.15441033244132996,
    -0.10598313063383102,
    -0.027677301317453384,
    0.01784629188477993,
    0.023330729454755783,
    0.11871637403964996,
    0.05371291562914848,
    -0.03192175179719925,
    -0.035436730831861496,
    0.001889435457997024,
    -0.0591413751244545,
    -0.08896724879741669,
    -0.019820375367999077,
    -0.05256478115916252,
    0.004677555989474058,
    0.031043641269207,
    0.019565517082810402,
    -0.033397939056158066,
    0.07561307400465012,
    -0.016780151054263115,
    0.1309506744146347,
    -0.04489729925990105,
    0.048793233931064606,
    -0.040977947413921356,
    0.03141351789236069,
    -0.04974835738539696,
    0.061183955520391464,
    -0.008206182159483433,
    -0.01100289449095726,
    0.07224975526332855,
    -0.0015892904484644532,
    0.03598985821008682,
    -0.039968859404325485,
    0.06238463893532753,
    0.003147123847156763,
    0.02810625359416008,
    -0.0011039130622521043,
    -0.002117909723892808,
    -0.051064182072877884,
    0.02077842503786087,
    0.034993790090084076,
    -0.05311308801174164,
    -0.03989189490675926,
    0.0017637360142543912,
    -0.0030570263043045998,
    -0.024391094222664833,
    -0.007278275676071644,
    -0.05258707329630852,
    -0.02925397828221321,
    -0.005421546753495932,
    -0.06175001338124275,
    -0.013583815656602383,
    -0.06102034077048302,
    0.00417914567515254,
    -0.014822049997746944,
    0.0033609915990382433,
    0.020680341869592667,
    0.013546684756875038,
    0.00687050586566329,
    -0.1628759652376175,
    0.032245904207229614,
    0.02190212346613407,
    0.0066230581142008305,
    -0.0021087517961859703,
    0.08560984581708908,
    0.013524694368243217,
    0.06786032766103745,
    0.0029105537105351686,
    0.022800972685217857,
    -0.04463587701320648,
    -0.06394416838884354,
    -0.09981390833854675,
    0.007634133566170931,
    0.03135267645120621,
    -5.191218477307302e-8,
    -0.055974509567022324,
    0.06906016170978546,
    -0.13158197700977325,
    0.04522031918168068,
    0.10198450088500977,
    0.04662192612886429,
    0.00829106941819191,
    0.11613187193870544,
    0.02853655070066452,
    -0.07016652077436447,
    0.02326599881052971,
    0.026751171797513962,
    0.017802728340029716,
    -0.04289453476667404,
    0.04123828932642937,
    -0.10394938290119171,
    -0.002551026875153184,
    -0.0886746272444725,
    -0.11596554517745972,
    -0.04896189644932747,
    -0.04758567735552788,
    0.015330680646002293,
    0.0276230089366436,
    -0.00847406405955553,
    -0.02881389856338501,
    0.055960170924663544,
    -0.01297435350716114,
    -0.05537646263837814,
    0.11253853887319565,
    0.03697565943002701,
    -0.07231421023607254,
    0.005863943137228489,
    0.0263192281126976,
    -0.07020273804664612,
    -0.016562089323997498,
    0.00985560193657875,
    -0.0055959587916731834,
    0.01331611443310976,
    -0.07368265837430954,
    0.028598161414265633,
    0.05009264126420021,
    0.03554411977529526,
    0.022617997601628304,
    0.045129574835300446,
    -0.049089595675468445,
    -0.027665574103593826,
    0.04396050423383713,
    -0.031054452061653137,
    0.03487280756235123,
    -0.016452986747026443,
    0.02323305234313011,
    -0.10143332183361053,
    -0.009920189157128334,
    0.09151120483875275,
    0.10173176974058151,
    0.018646277487277985,
    0.045888762921094894,
    0.004677239339798689,
    0.08268081396818161,
    -0.061147917062044144,
    0.10079975426197052,
    -0.09338122606277466,
    -0.030995314940810204,
    0.0811813548207283
  ],
  "text": "nosflare discovery query fix:\n\n**Problem**: \"New Videos\" showing 2016 archived Vine content instead of recently added content. Root cause: 8000 users/hour mostly engaging (not posting videos), so newest `created_at` timestamps were from 2016 archive.\n\n**Solution**: Automatic detection of discovery queries + sort by ingestion time.\n\nDiscovery query = no authors, no ids, no since/until (just browsing)\n→ Use `created_timestamp DESC` (when relay received it)\n\nTargeted query = has authors/ids/time filters (looking for something specific)\n→ Use `created_at DESC` (original event timestamp)\n\n**Changes**:\n- Added `isDiscoveryQuery()` helper function\n- Modified 2 ORDER BY clauses in buildQuery\n- Migration 9: indexes on created_timestamp\n- Updated index selection logic for discovery queries\n\n**Files modified**:\n- src/relay-worker.ts (query logic)\n- src/migrations.ts (new indexes)\n\n**Result**: \"New Videos\" now shows recently-ingested content (could be new user videos OR newly imported archive videos), while time-based searches still work for finding \"videos from 2016\".\n\nVersion deployed: 702ee0a8-50e9-4643-abe1-54eaee977c27",
  "sections": [
    "Project Notes"
  ],
  "timestamp": 1763074728301,
  "path": "/Users/rabble/code/vine_fun/nosflare/.private-journal/2025-11-13/22-58-48-301919.md"
}