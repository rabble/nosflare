{
  "embedding": [
    -0.04698283225297928,
    -0.03661733865737915,
    -0.01154027134180069,
    0.12268412113189697,
    0.04257313907146454,
    -0.04265763983130455,
    -0.026081128045916557,
    -0.04598010331392288,
    0.05278052017092705,
    0.014180080033838749,
    -0.020343951880931854,
    0.0720524787902832,
    -0.05332760140299797,
    -0.018326545134186745,
    -0.034651435911655426,
    -0.062213849276304245,
    0.017884954810142517,
    -0.09722811728715897,
    -0.05502694472670555,
    -0.06434980034828186,
    0.024743780493736267,
    0.00007433215068886057,
    0.018138008192181587,
    -0.0169668085873127,
    -0.014689464122056961,
    -0.04879714548587799,
    -0.03817689046263695,
    -0.06934558600187302,
    0.0054105655290186405,
    0.01672542281448841,
    -0.07029204815626144,
    0.015274954959750175,
    -0.11120922118425369,
    -0.008297774940729141,
    -0.022282088175415993,
    0.04357118904590607,
    -0.03327033296227455,
    -0.029729025438427925,
    0.009115093387663364,
    -0.044387396425008774,
    0.08881822973489761,
    -0.0037989970296621323,
    -0.014450084418058395,
    -0.030540432780981064,
    -0.03716292977333069,
    0.0003366525052115321,
    -0.005260109435766935,
    0.01166282407939434,
    -0.007254844531416893,
    -0.012150821276009083,
    -0.06464936584234238,
    0.032329607754945755,
    -0.02580479346215725,
    -0.024732565507292747,
    0.12938524782657623,
    -0.05313241854310036,
    -0.004986199550330639,
    -0.0632409080862999,
    0.08085619658231735,
    -0.05132656916975975,
    0.06961436569690704,
    0.017948122695088387,
    0.048299696296453476,
    -0.08586494624614716,
    0.019813086837530136,
    -0.05378920957446098,
    0.0650353729724884,
    0.02455928362905979,
    0.03865576535463333,
    0.042348217219114304,
    0.015254607424139977,
    0.09163763374090195,
    -0.03571723401546478,
    0.03669431433081627,
    0.031053954735398293,
    0.013176022097468376,
    -0.04368169233202934,
    -0.021066348999738693,
    0.013934198766946793,
    -0.11094709485769272,
    0.07989110052585602,
    -0.054373517632484436,
    0.050385020673274994,
    -0.005523165222257376,
    0.0032067729625850916,
    -0.061532989144325256,
    0.039343953132629395,
    -0.05634140595793724,
    0.08221886307001114,
    -0.054679788649082184,
    0.07000648975372314,
    0.039238497614860535,
    0.021435853093862534,
    -0.005520863924175501,
    0.009408128447830677,
    0.005086218938231468,
    0.006282085087150335,
    0.2033531367778778,
    -0.08417081832885742,
    -0.006958048790693283,
    0.06011269614100456,
    -0.005223626736551523,
    -0.00565987266600132,
    0.08336718380451202,
    -0.04208652302622795,
    0.01635589823126793,
    0.03621728718280792,
    0.04212005063891411,
    -0.10574623942375183,
    0.010350578464567661,
    0.00803707167506218,
    0.08993697166442871,
    -0.0018984602065756917,
    -0.02326255477964878,
    -0.02885476127266884,
    0.03263172134757042,
    -0.0010881792986765504,
    -0.015852216631174088,
    -0.019022833555936813,
    0.15958181023597717,
    0.0007849281537346542,
    0.0241130031645298,
    -0.07325517386198044,
    -0.06545994430780411,
    0.03846246376633644,
    0.07470312714576721,
    0.05030001327395439,
    6.861696276323646e-33,
    0.06071794033050537,
    0.0526973195374012,
    -0.04508918151259422,
    -0.027682669460773468,
    -0.0380801185965538,
    0.02380712702870369,
    0.03747832030057907,
    0.003915153909474611,
    -0.015091831795871258,
    0.011790130287408829,
    -0.14083711802959442,
    -0.04375788941979408,
    -0.041882436722517014,
    -0.05731973424553871,
    0.007606875151395798,
    -0.07414872199296951,
    0.028895752504467964,
    -0.005857488606125116,
    -0.05341619253158569,
    0.04922318086028099,
    0.10627752542495728,
    -0.012565599754452705,
    -0.03671850636601448,
    -0.0440237782895565,
    -0.03252705931663513,
    0.019942421466112137,
    -0.03128478303551674,
    -0.14320100843906403,
    -0.002728072926402092,
    0.04354720562696457,
    -0.01485955249518156,
    0.024203073233366013,
    0.02245056815445423,
    0.057015202939510345,
    -0.03538728505373001,
    -0.01643710397183895,
    -0.02190362475812435,
    -0.037028130143880844,
    0.0058737220242619514,
    -0.12494003772735596,
    -0.04960396885871887,
    0.04324595257639885,
    -0.06375615298748016,
    -0.012348017655313015,
    -0.05338653549551964,
    -0.0007726872572675347,
    -0.07069696485996246,
    0.030691348016262054,
    0.04697788134217262,
    0.05011126399040222,
    -0.013318521901965141,
    0.04119954630732536,
    0.023546814918518066,
    -0.006810855586081743,
    0.09441681951284409,
    0.008877812884747982,
    0.14750494062900543,
    0.024735914543271065,
    0.03602395951747894,
    0.03846568614244461,
    0.012421970255672932,
    0.00107665138784796,
    -0.0012895583640784025,
    -0.039885032922029495,
    0.10415385663509369,
    0.02587667666375637,
    0.0009205917594954371,
    -0.006118397694081068,
    -0.002296273596584797,
    -0.009895619936287403,
    0.01020430400967598,
    -0.027990195900201797,
    0.048881348222494125,
    0.042350564152002335,
    0.06117689609527588,
    -0.03882034868001938,
    -0.02610059268772602,
    0.0011646404163911939,
    -0.0840991735458374,
    -0.016908712685108185,
    -0.04761052131652832,
    -0.07047734409570694,
    -0.02218295820057392,
    -0.050396546721458435,
    0.05564241483807564,
    -0.08371667563915253,
    -0.019139088690280914,
    0.03628745302557945,
    -0.019404305145144463,
    -0.00005462584158522077,
    0.05520070344209671,
    0.0702567771077156,
    0.04461022838950157,
    -0.0251871719956398,
    -0.05522145330905914,
    -5.328664665781205e-33,
    -0.08053028583526611,
    -0.045120421797037125,
    -0.059124890714883804,
    0.10770286619663239,
    -0.047578077763319016,
    -0.04702670872211456,
    -0.05981942266225815,
    -0.019492056220769882,
    -0.011053909547626972,
    0.007867777720093727,
    -0.05489256978034973,
    -0.023399123921990395,
    0.004394066520035267,
    -0.00435451976954937,
    -0.033823028206825256,
    0.016499970108270645,
    0.055266574025154114,
    -0.06465205550193787,
    0.02369389496743679,
    -0.09423411637544632,
    -0.010081695392727852,
    0.03820246830582619,
    -0.019107088446617126,
    0.09138078987598419,
    -0.03102000430226326,
    0.027195287868380547,
    0.06323667615652084,
    0.04342150315642357,
    -0.03839154541492462,
    -0.0199038814753294,
    -0.01589338667690754,
    -0.0065704756416380405,
    0.04162660241127014,
    0.0608932264149189,
    0.003984634764492512,
    -0.03210291638970375,
    0.054289426654577255,
    0.05121510103344917,
    -0.0033508141059428453,
    -0.00487853866070509,
    0.04247238487005234,
    0.055610597133636475,
    0.03198045864701271,
    0.03774433955550194,
    0.011728417128324509,
    0.003761137602850795,
    -0.10597454756498337,
    -0.06693577766418457,
    -0.004646918270736933,
    0.08972795307636261,
    0.034938082098960876,
    -0.03146341070532799,
    0.02230823040008545,
    0.00854577124118805,
    0.003853575559332967,
    -0.02052224613726139,
    -0.0026430326979607344,
    -0.08233817666769028,
    -0.026168836280703545,
    0.011397157795727253,
    0.06334073841571808,
    0.009640555828809738,
    0.04349149018526077,
    0.0008384403772652149,
    0.09969335794448853,
    -0.01969689503312111,
    0.01539886835962534,
    -0.04919649288058281,
    0.08451453596353531,
    0.030166909098625183,
    -0.050833892077207565,
    0.00860251672565937,
    -0.04730410873889923,
    0.021352725103497505,
    0.009787457063794136,
    0.004412918351590633,
    0.036621369421482086,
    0.035470396280288696,
    -0.0004504494718275964,
    0.009692954830825329,
    -0.08304847776889801,
    0.05252150073647499,
    0.026944100856781006,
    -0.036347631365060806,
    -0.0007055634050630033,
    0.05298319831490517,
    0.059793662279844284,
    0.11457759141921997,
    0.013687966391444206,
    0.03358360752463341,
    -0.006581321824342012,
    -0.029787113890051842,
    -0.03687390312552452,
    -0.010481699369847775,
    -0.00576174259185791,
    -4.83357780467486e-8,
    -0.07850100100040436,
    -0.0017184157622978091,
    -0.053611014038324356,
    0.07123763859272003,
    0.07724527269601822,
    0.007794894743710756,
    -0.009792471304535866,
    0.03536050766706467,
    0.026358366012573242,
    0.033625371754169464,
    0.025629274547100067,
    0.01761704683303833,
    0.0008411122835241258,
    -0.056051548570394516,
    0.09343127906322479,
    -0.08931070566177368,
    -0.027249101549386978,
    -0.04053691402077675,
    -0.06968758255243301,
    -0.12761029601097107,
    0.08416075259447098,
    0.04237451031804085,
    -0.06687726825475693,
    0.00929968897253275,
    0.022280758246779442,
    0.022872306406497955,
    0.12127674371004105,
    -0.018401766195893288,
    0.006822659634053707,
    -0.020603109151124954,
    -0.07431426644325256,
    -0.03012811578810215,
    0.017188729718327522,
    -0.031377311795949936,
    -0.09423305094242096,
    0.04161277413368225,
    0.03007841482758522,
    -0.007813947275280952,
    -0.002917288802564144,
    0.013009440153837204,
    0.08732949197292328,
    0.06876406818628311,
    -0.016869453713297844,
    -0.02371574193239212,
    0.05499325320124626,
    -0.005412926897406578,
    -0.03847108036279678,
    0.005100787151604891,
    0.04862511530518532,
    -0.038869693875312805,
    -0.06711171567440033,
    -0.02814270369708538,
    -0.01124132052063942,
    0.09190105646848679,
    0.037814557552337646,
    -0.05757598951458931,
    -0.013852252624928951,
    0.006503324024379253,
    0.13606144487857819,
    -0.026495492085814476,
    0.07031292468309402,
    -0.07927052676677704,
    -0.06429452449083328,
    0.04513639211654663
  ],
  "text": "nosflare relay performance fix:\n\nRoot cause: Lines 798-828 in relay-worker.ts were doing synchronous FTS5 indexing (DELETE + INSERT) for every event, plus looping through hashtags. With 8k users/hour this created severe write contention.\n\nChanges made:\n1. Added Queue binding to wrangler.toml (search-indexing-queue + DLQ)\n2. Updated types.ts with SearchIndexMessage interface and Queue binding\n3. Created queue consumer in relay-worker.ts default export\n4. Modified saveEventToD1 to send queue messages instead of direct indexing\n5. Created queues: search-indexing-queue and search-indexing-dlq\n\nFiles modified:\n- wrangler.toml (queue config)\n- src/types.ts (SearchIndexMessage, Env)\n- src/relay-worker.ts (queue consumer, saveEventToD1)\n\nTrade-off: Search index now lags by a few seconds but writes are fast.",
  "sections": [
    "Project Notes"
  ],
  "timestamp": 1763072456532,
  "path": "/Users/rabble/code/vine_fun/nosflare/.private-journal/2025-11-13/22-20-56-532225.md"
}