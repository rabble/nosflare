---
title: "3:33:38 PM - October 31, 2025"
date: 2025-10-31T02:33:38.404Z
timestamp: 1761878018404
---

## Project Notes

nosflare relay now correctly implements NIP-01 replaceable events:
- src/relay-worker.ts lines 526-602 contain the replaceable event logic
- isReplaceableKind() helper identifies which kinds are replaceable
- saveEventToD1() checks for existing events before inserting
- cleanup-duplicate-replaceable.sql used to clean up production database
- test-duplicate-cleanup.sql used to preview what would be deleted

Production database had many duplicate kind 0 (metadata) events that were cleaned up. Staging environment (staging-relay.divine.video) was already clean since it was new.

Both production and staging now have the fix deployed and working correctly.
